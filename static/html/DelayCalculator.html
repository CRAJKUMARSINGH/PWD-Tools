<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Delay Calculator</title>
    <style>
        :root {
            --primary: #2E8B57;
            --primary-dark: #228B22;
            --bg: #f0f8f5;
            --text: #1f2d3d;
            --card-bg: #ffffff;
            --border: #e1e8e3;
            --shadow: 0 8px 24px rgba(0,0,0,0.08);
            --radius: 12px;
        }
        html, body {
            height: 100%;
        }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #ecf7f1 0%, #f7fffb 100%);
            margin: 0;
            color: var(--text);
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 40px 20px;
        }
        .calculator {
            width: 100%;
            max-width: 680px;
            background: var(--card-bg);
            border: 1px solid var(--border);
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            padding: 28px;
        }
        .calculator h2 {
            margin-top: 0;
            margin-bottom: 18px;
            color: var(--primary);
            text-align: center;
        }
        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 16px 20px;
        }
        .input-group label {
            display: block;
            margin-bottom: 6px;
            font-weight: 600;
        }
        .input-group input[type="date"] {
            display: block;
            width: 100%;
            padding: 10px 12px;
            border: 1px solid #d5dfd8;
            border-radius: 8px;
            transition: border-color .2s, box-shadow .2s;
            background: #fff;
        }
        .input-group input[type="date"]:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(46,139,87,0.15);
        }
        .actions {
            display: flex;
            gap: 12px;
            justify-content: center;
            margin-top: 16px;
        }
        button {
            background: var(--primary);
            color: #fff;
            border: none;
            padding: 10px 18px;
            border-radius: 999px;
            cursor: pointer;
            font-weight: 600;
            letter-spacing: .2px;
            transition: transform .05s ease, background .2s ease, box-shadow .2s ease;
            box-shadow: 0 6px 14px rgba(46,139,87,0.25);
        }
        button:hover { background: var(--primary-dark); }
        button:active { transform: translateY(1px); }
        #result {
            margin-top: 18px;
            background: #f3fbf6;
            border: 1px dashed #b8d8c3;
            color: #145a32;
            padding: 14px 16px;
            border-radius: 10px;
            text-align: center;
            font-weight: 600;
        }
    </style>
</head>
<body>
    <div class="calculator">
        <h2>Delay Calculator</h2>

        <div class="grid">
            <div class="input-group">
                <label for="scheduledStart">Scheduled Start Date</label>
                <input type="date" id="scheduledStart">
            </div>

            <div class="input-group">
                <label for="scheduledCompletion">Scheduled Completion Date</label>
                <input type="date" id="scheduledCompletion">
            </div>

            <div class="input-group">
                <label for="actualCompletion">Actual Completion Date</label>
                <input type="date" id="actualCompletion">
            </div>
        </div>

        <div class="actions">
            <button onclick="calculateDelay()">Calculate Delay</button>
        </div>

        <div id="result"></div>
    </div>

    <script>
        // Celebration balloons
        (function addBalloonStyles(){ if (document.getElementById('balloon-styles')) return; const css = `
.balloons-container{position:fixed;inset:0;pointer-events:none;overflow:hidden;z-index:9999}
.balloon{position:absolute;bottom:-10%;width:22px;height:28px;border-radius:50% 50% 45% 45%;opacity:.9;animation:floatUp linear forwards}
.balloon:after{content:'';position:absolute;bottom:-8px;left:50%;transform:translateX(-50%);width:2px;height:10px;background:rgba(0,0,0,.2)}
@keyframes floatUp{to{transform:translateY(-120vh)}}
`; const style = document.createElement('style'); style.id='balloon-styles'; style.textContent = css; document.head.appendChild(style); })();
        (function addConfettiStyles(){ if (document.getElementById('confetti-styles')) return; const css = `.confetti-container{position:fixed;inset:0;pointer-events:none;overflow:hidden;z-index:9999}.confetti{position:absolute;top:-10%;width:8px;height:14px;opacity:.9;animation:confettiFall linear forwards}@keyframes confettiFall{to{transform:translateY(120vh) rotate(720deg)}}`; const s=document.createElement('style'); s.id='confetti-styles'; s.textContent=css; document.head.appendChild(s);} )(); function triggerConfetti(total=120){ const colors=['#ff6b6b','#ffd93d','#6bcb77','#4d96ff','#9b5de5','#f15bb5','#00bbf9','#2E8B57']; const cont=document.createElement('div'); cont.className='confetti-container'; document.body.appendChild(cont); for(let i=0;i<total;i++){ const c=document.createElement('div'); c.className='confetti'; const size=6+Math.random()*6; c.style.width=size+'px'; c.style.height=(size*1.5)+'px'; c.style.left=(Math.random()*100)+'%'; c.style.background=colors[Math.floor(Math.random()*colors.length)]; c.style.animationDuration=(4+Math.random()*3)+'s'; c.style.animationDelay=(Math.random()*0.5)+'s'; cont.appendChild(c);} setTimeout(()=>cont.remove(), 6000);} function triggerBalloons(total=24){ const colors=['#2E8B57','#3CB371','#20B2AA','#66CDAA','#90EE90','#32CD32','#228B22','#7FFFD4']; const cont=document.createElement('div'); cont.className='balloons-container'; document.body.appendChild(cont); for(let i=0;i<total;i++){ const b=document.createElement('div'); b.className='balloon'; const size=18+Math.random()*18; b.style.width=size+'px'; b.style.height=size*1.25+'px'; b.style.left=(Math.random()*100)+'%'; const dur=5+Math.random()*3; b.style.animationDuration=dur+'s'; b.style.animationDelay=(Math.random()*0.8)+'s'; b.style.background=colors[Math.floor(Math.random()*colors.length)]; cont.appendChild(b);} setTimeout(()=>{cont.remove();}, 8000); }
        function formatDate(date) {
    const day = String(date.getDate()).padStart(2, '0');
    const month = String(date.getMonth() + 1).padStart(2, '0'); // Month is 0-indexed
    const year = date.getFullYear();
    return `${day}/${month}/${year}`;
}

        function calculateDelay() {
            const scheduledStartInput = document.getElementById('scheduledStart').value;
            const scheduledCompletionInput = document.getElementById('scheduledCompletion').value;
            const actualCompletionInput = document.getElementById('actualCompletion').value;

            const scheduledStart = new Date(scheduledStartInput);
            const scheduledCompletion = new Date(scheduledCompletionInput);
            const actualCompletion = new Date(actualCompletionInput);

            if (isNaN(scheduledStart) || isNaN(scheduledCompletion) || isNaN(actualCompletion)) {
                document.getElementById('result').textContent = "Please enter valid dates.";
                return;
            }

            if (actualCompletion < scheduledCompletion) {
                document.getElementById('result').textContent = "Actual completion cannot be before scheduled completion.";
                return;
            }

            const delayMilliseconds = actualCompletion - scheduledCompletion;

            const years = Math.floor(delayMilliseconds / (1000 * 60 * 60 * 24 * 365.25));
            const remainingMilliseconds = delayMilliseconds % (1000 * 60 * 60 * 24 * 365.25);
            const months = Math.floor(remainingMilliseconds / (1000 * 60 * 60 * 24 * 30.44));
            const days = Math.floor((remainingMilliseconds % (1000 * 60 * 60 * 24 * 30.44)) / (1000 * 60 * 60 * 24));

            const formattedScheduledStart = formatDate(scheduledStart);
            const formattedScheduledCompletion = formatDate(scheduledCompletion);
            const formattedActualCompletion = formatDate(actualCompletion);

            const msg = `Delay: ${years} years, ${months} months, ${days} days`;
            document.getElementById('result').textContent = msg;
            // Celebrate when delay is zero
            if(years===0 && months===0 && days===0){ try{ triggerBalloons(); triggerConfetti(); }catch(e){} }
        }
    </script>
</body>
</html>